#! /bin/sh

. ${srcdir:=.}/t.frame

# This test checks if merging of folded header lines with encoded words
# is working properly.
#
# test below
# remember to use ${srcdir}
cat >${TMPDIR}/input <<_EOF
Subject: =?iso-8859-1?q?ok?=
    =?iso-8859-1?q?ay?=
	another
  	=?iso-8859-1?q?merge?=	 	=?iso-8859-1?q?_worked?=
Reply-To: =?iso-8859-1?Q?jo?= =?iso-8859-1?Q?in?=
Reply-To: =?iso-8859-1?Q?jo?=    =?iso-8859-1?Q?in?=
Reply-To: =?iso-8859-1?Q?john?= q =?iso-8859-1?Q?doe?=
Reply-To: =?iso-8859-1?Q?john?=_q_=?iso-8859-1?Q?public?=

- torso -
header: =?iso-8859-1?q?bo?=
    =?iso-8859-1?q?dy?=
_EOF
cat >${TMPDIR}/reference <<_EOF
subj:okay
subj:another
subj:merge
subj:worked
Reply-To
join
Reply-To
join
Reply-To
john
doe
Reply-To
john_q_public
torso
header
iso-8859-1
iso-8859-1
_EOF

../bogolexer -p -C <${TMPDIR}/input >${TMPDIR}/output
cmp ${TMPDIR}/reference ${TMPDIR}/output \
|| diff ${TMPDIR}/reference ${TMPDIR}/output
