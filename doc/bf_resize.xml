<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN"
"http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd">
<refentry id='bf_resize.1'>
    <refmeta>
	<refentrytitle>bf_resize</refentrytitle>
	<manvolnum>1</manvolnum>
    </refmeta>
    <refnamediv id='name'>
	<refname>bf_resize</refname>
	<refpurpose>shell script to rewrite DB_CONFIG for proper
	    Berkeley DB lock table sizing</refpurpose>
    </refnamediv>
    <refsynopsisdiv id='synopsis'>
	<cmdsynopsis>
	    <command>bf_resize</command>
	    <arg choice='opt'><replaceable>bogofilter_directory</replaceable></arg>
	</cmdsynopsis>
    </refsynopsisdiv>

    <refsect1 id='description'><title>Description</title>
	<para><command>bf_resize</command> scans the databases
	    listed in the configuration file and modifies
	    <filename>DB_CONFIG</filename> file lines in
	    <replaceable>bogofilter_directory</replaceable>, creating
	    them if missing. More
	    precisely, it replaces <varname>set_lk_max_locks</varname> and
	    <varname>set_lk_max_objects</varname> lines into <filename>DB_CONFIG</filename>
	    that set twice the current leaf page count as
	    the new lock count and lock object count limits. It runs
	    recovery on the database to make the change effective
	    immediately.
    </para>
    <para>If no <replaceable>bogofilter_directory</replaceable> argument
	is given, then <command>bf_resize</command> will default to
	using the current working directory.
</para></refsect1>
    <refsect1 id='exitstatus'><title>Exit Status</title>
	<para>The script exits with status code 0 if everything went
	    well, and nonzero if it encountered trouble.</para>
    </refsect1>
    <refsect1 id='notes'><title>Notes</title>
	<para>This script is meant for use with Berkeley DB based
	    bogofilter versions exclusively.</para>
	<para>This script expects a SUSv2 compliant shell.  Solaris
	    systems should have the <systemitem>SUNWxcu4</systemitem> package installed (when
	    bogofilter is configured) so that
	    <filename>/usr/xpg4/bin/sh</filename> can
	   be used.</para>
    </refsect1>
</refentry>
